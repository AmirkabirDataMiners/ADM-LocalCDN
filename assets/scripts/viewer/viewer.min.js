/*!
 * Viewer.js v0.4.0
 * https://github.com/fengyuanchen/viewerjs
 *
 * Copyright (c) 2015-2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-03-20T07:17:50.179Z
 */
(function(n,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("Viewer requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){"use strict";function tr(n){return gr.call(n).slice(8,-1).toLowerCase()}function ui(n){return typeof n=="string"}function h(n){return typeof n=="number"&&!isNaN(n)}function d(n){return typeof n=="undefined"}function yt(n){return typeof n=="object"&&n!==null}function iu(n){var t,i;if(!yt(n))return!1;try{return t=n.constructor,i=t.prototype,t&&i&&nu.call(i,"isPrototypeOf")}catch(r){return!1}}function c(n){return tr(n)==="function"}function ru(n){return Array.isArray?Array.isArray(n):tr(n)==="array"}function dt(n,t){return(t=t>=0?t:0,Array.from)?Array.from(n).slice(t):tu.call(n,t)}function ir(n,t){var i=-1;return t.indexOf?t.indexOf(n):(s(t,function(t,r){if(t===n)return i=r,!1}),i)}function fi(n){return ui(n)&&(n=n.trim?n.trim():n.replace(br,"1")),n}function s(n,t){var r,i;if(n&&c(t))if(ru(n)||h(n.length)){for(i=0,r=n.length;i<r;i++)if(t.call(n,n[i],i,n)===!1)break}else if(yt(n))for(i in n)if(n.hasOwnProperty(i)&&t.call(n,n[i],i,n)===!1)break;return n}function tt(n){var t;if(arguments.length>1){if(t=dt(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift();s(t,function(t){s(t,function(t,i){n[i]=t})})}return n}function l(n,t){var i=dt(arguments,2);return function(){return n.apply(t,i.concat(dt(arguments)))}}function y(n,t){var i=n.style;s(t,function(n,t){wr.test(t)&&h(n)&&(n+="px");i[t]=n})}function uu(t){return n.getComputedStyle?n.getComputedStyle(t,null):t.currentStyle}function rr(n,t){return n.classList?n.classList.contains(t):n.className.indexOf(t)>-1}function i(n,t){var r;if(t){if(h(n.length))return s(n,function(n){i(n,t)});if(n.classList)return n.classList.add(t);r=fi(n.className);r?r.indexOf(t)<0&&(n.className=r+" "+t):n.className=t}}function f(n,t){if(t){if(h(n.length))return s(n,function(n){f(n,t)});if(n.classList)return n.classList.remove(t);n.className.indexOf(t)>=0&&(n.className=n.className.replace(t,""))}}function it(n,t,r){if(h(n.length))return s(n,function(n){it(n,t,r)});r?i(n,t):f(n,t)}function ct(n,t){return yt(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-"+t)}function ur(n,t,i){yt(i)&&d(n[t])?n[t]=i:n.dataset?n.dataset[t]=i:n.setAttribute("data-"+t,i)}function fu(n,t){yt(n[t])?delete n[t]:n.dataset?delete n.dataset[t]:n.removeAttribute("data-"+t)}function r(n,t,i,u){var f=fi(t).split(di),e=i;if(f.length>1)return s(f,function(t){r(n,t,i)});u&&(i=function(){return v(n,t,i),e.apply(n,arguments)});n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function v(n,t,i){var r=fi(t).split(di);if(r.length>1)return s(r,function(t){v(n,t,i)});n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent&&n.detachEvent("on"+t,i)}function p(n,t,i){var r;return n.dispatchEvent?(c(oi)&&c(CustomEvent)?r=d(i)?new oi(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):d(i)?(r=u.createEvent("Event"),r.initEvent(t,!0,!0)):(r=u.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,i)),n.dispatchEvent(r)):n.fireEvent?n.fireEvent("on"+t):void 0}function rt(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function g(t){var i=t||n.event,r;return i.target||(i.target=i.srcElement||u),h(i.pageX)||(r=u.documentElement,i.pageX=i.clientX+(n.scrollX||r&&r.scrollLeft||0)-(r&&r.clientLeft||0),i.pageY=i.clientY+(n.scrollY||r&&r.scrollTop||0)-(r&&r.clientTop||0)),i}function eu(t){var i=u.documentElement,r=t.getBoundingClientRect();return{left:r.left+(n.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0),top:r.top+(n.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0)}}function ou(n){var t=n.length,i=0,r=0;return t&&(s(n,function(n){i+=n.pageX;r+=n.pageY}),i/=t,r/=t),{pageX:i,pageY:r}}function ut(n,t){return n.getElementsByTagName(t)}function w(n,t){return n.getElementsByClassName?n.getElementsByClassName(t):n.querySelectorAll("."+t)}function gt(n,t){if(t.length)return s(t,function(t){gt(n,t)});n.appendChild(t)}function fr(n){n.parentNode&&n.parentNode.removeChild(n)}function lt(n){while(n.firstChild)n.removeChild(n.firstChild)}function er(n,t){d(n.textContent)?n.innerText=t:n.textContent=t}function or(n){return n.offsetWidth}function su(n){return ui(n)?n.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function sr(n,t){var i;if(n.naturalWidth)return t(n.naturalWidth,n.naturalHeight);i=u.createElement("img");i.onload=function(){t(this.width,this.height)};i.src=n.src}function hu(n){var t=[],i=n.rotate,r=n.scaleX,u=n.scaleY;return h(i)&&t.push("rotate("+i+"deg)"),h(r)&&h(u)&&t.push("scale("+r+","+u+")"),t.length?t.join(" "):"none"}function ei(n){switch(n){case 2:return cr;case 3:return lr;case 4:return ar}}function a(n,t){var i=this;i.element=n;i.options=tt({},a.DEFAULTS,iu(t)&&t);i.isImg=!1;i.isBuilt=!1;i.isShown=!1;i.isViewed=!1;i.isFulled=!1;i.isPlayed=!1;i.wheeling=!1;i.playing=!1;i.fading=!1;i.tooltiping=!1;i.transitioning=!1;i.action=!1;i.target=!1;i.timeout=!1;i.index=0;i.length=0;i.init()}var u=n.document,oi=n.Event,o="viewer",ni=o+"-fixed",pt=o+"-open",ft=o+"-show",nt=o+"-hide",cr="viewer-hide-xs-down",lr="viewer-hide-sm-down",ar="viewer-hide-md-down",wt=o+"-fade",b=o+"-in",vr=o+"-move",bt=o+"-active",et=o+"-invisible",e=o+"-transition",yr=o+"-fullscreen",si=o+"-fullscreen-exit",pr=o+"-close",hi="mousedown touchstart pointerdown MSPointerDown",ci="mousemove touchmove pointermove MSPointerMove",li="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",ai="wheel mousewheel DOMMouseScroll",ot="transitionend",st="load",vi="keydown",kt="click",yi="resize",pi="build",ti="built",wi="show",ii="shown",bi="hide",ki="hidden",ri="view",at="viewed",wr=/width|height|left|top|marginLeft|marginTop/,br=/^\s+(.*)\s+$/,di=/\s+/,kr=typeof u.createElement(o).style.transition!="undefined",vt=Math.min,k=Math.max,ht=Math.abs,gi=Math.sqrt,dr=Math.round,nr=Object.prototype,gr=nr.toString,nu=nr.hasOwnProperty,tu=Array.prototype.slice,hr;return a.prototype={constructor:a,init:function(){var n=this,i=n.options,t=n.element,e=t.tagName.toLowerCase()==="img",f=e?[t]:ut(t,"img"),h=f.length,a=l(n.ready,n);ct(t,o)||(ur(t,o,n),h)&&(c(i.build)&&r(t,pi,i.build,!0),p(t,pi)!==!1)&&(kr||(i.transition=!1),n.isImg=e,n.length=h,n.count=0,n.images=f,n.body=u.body,i.inline?(r(t,ti,function(){n.view()},!0),s(f,function(n){n.complete?a():r(n,st,a,!0)})):r(t,kt,n._start=l(n.start,n)))},ready:function(){var n=this;n.count++;n.count===n.length&&n.build()},build:function(){var n=this,t=n.options,o=n.element,l,s,f,h,e,b,k,v;n.isBuilt||(l=u.createElement("div"),l.innerHTML=a.TEMPLATE,n.parent=s=o.parentNode,n.viewer=f=w(l,"viewer-container")[0],n.canvas=w(f,"viewer-canvas")[0],n.footer=w(f,"viewer-footer")[0],n.title=k=w(f,"viewer-title")[0],n.toolbar=e=w(f,"viewer-toolbar")[0],n.navbar=b=w(f,"viewer-navbar")[0],n.button=h=w(f,"viewer-button")[0],n.tooltipBox=w(f,"viewer-tooltip")[0],n.player=w(f,"viewer-player")[0],n.list=w(f,"viewer-list")[0],i(k,t.title?ei(t.title):nt),i(e,t.toolbar?ei(t.toolbar):nt),i(b,t.navbar?ei(t.navbar):nt),it(h,nt,!t.button),it(e.querySelectorAll("li[class*=zoom]"),et,!t.zoomable),it(e.querySelectorAll("li[class*=flip]"),et,!t.scalable),t.rotatable||(v=e.querySelectorAll("li[class*=rotate]"),i(v,et),gt(e,v)),t.inline?(i(h,yr),y(f,{zIndex:t.zIndexInline}),uu(s).position==="static"&&y(s,{position:"relative"})):(i(h,pr),i(f,ni),i(f,wt),i(f,nt),y(f,{zIndex:t.zIndex})),s.insertBefore(f,o.nextSibling),t.inline&&(n.render(),n.bind(),n.isShown=!0),n.isBuilt=!0,c(t.built)&&r(o,ti,t.built,!0),p(o,ti))},unbuild:function(){var n=this;n.isBuilt&&(n.isBuilt=!1,fr(n.viewer))},bind:function(){var t=this,i=t.options,f=t.element,e=t.viewer;c(i.view)&&r(f,ri,i.view);c(i.viewed)&&r(f,at,i.viewed);r(e,kt,t._click=l(t.click,t));r(e,ai,t._wheel=l(t.wheel,t));r(t.canvas,hi,t._mousedown=l(t.mousedown,t));r(u,ci,t._mousemove=l(t.mousemove,t));r(u,li,t._mouseup=l(t.mouseup,t));r(u,vi,t._keydown=l(t.keydown,t));r(n,yi,t._resize=l(t.resize,t))},unbind:function(){var t=this,i=t.options,r=t.element,f=t.viewer;c(i.view)&&v(r,ri,i.view);c(i.viewed)&&v(r,at,i.viewed);v(f,kt,t._click);v(f,ai,t._wheel);v(t.canvas,hi,t._mousedown);v(u,ci,t._mousemove);v(u,li,t._mouseup);v(u,vi,t._keydown);v(n,yi,t._resize)},render:function(){var n=this;n.initContainer();n.initViewer();n.initList();n.renderViewer()},initContainer:function(){var t=this;t.containerData={width:n.innerWidth,height:n.innerHeight}},initViewer:function(){var n=this,i=n.options,r=n.parent,t;i.inline&&(n.parentData=t={width:k(r.offsetWidth,i.minWidth),height:k(r.offsetHeight,i.minHeight)});(n.isFulled||!t)&&(t=n.containerData);n.viewerData=tt({},t)},renderViewer:function(){var n=this;n.options.inline&&!n.isFulled&&y(n.viewer,n.viewerData)},initList:function(){var n=this,u=n.options,o=n.element,t=n.list,f=[];s(n.images,function(n,t){var r=n.src,e=n.alt||su(r),i=u.url;r&&(ui(i)?i=n.getAttribute(i):c(i)&&(i=i.call(n,n)),f.push('<li><img src="'+r+'" data-action="view" data-index="'+t+'" data-original-url="'+(i||r)+'" alt="'+e+'"><\/li>'))});t.innerHTML=f.join("");s(ut(t,"img"),function(t){ur(t,"filled",!0);r(t,st,l(n.loadImage,n),!0)});n.items=ut(t,"li");u.transition&&r(o,at,function(){i(t,e)},!0)},renderList:function(n){var t=this,i=n||t.index,r=t.items[i].offsetWidth||30,u=r+1;y(t.list,{width:u*t.length,marginLeft:(t.viewerData.width-r)/2-u*i})},resetList:function(){var n=this;lt(n.list);f(n.list,e);y({marginLeft:0})},initImage:function(n){var t=this,f=t.options,s=t.image,e=t.viewerData,o=t.footer.offsetHeight,i=e.width,r=k(e.height-o,o),u=t.imageData||{};sr(s,function(e,o){var v=e/o,s=i,l=r,a,h;r*v>i?l=i/v:s=r*v;s=vt(s*.9,e);l=vt(l*.9,o);h={naturalWidth:e,naturalHeight:o,aspectRatio:v,ratio:s/e,width:s,height:l,left:(i-s)/2,top:(r-l)/2};a=tt({},h);f.rotatable&&(h.rotate=u.rotate||0,a.rotate=0);f.scalable&&(h.scaleX=u.scaleX||1,h.scaleY=u.scaleY||1,a.scaleX=1,a.scaleY=1);t.imageData=h;t.initialImageData=a;c(n)&&n()})},renderImage:function(n){var i=this,f=i.image,t=i.imageData,u=hu(t);y(f,{width:t.width,height:t.height,marginLeft:t.left,marginTop:t.top,WebkitTransform:u,msTransform:u,transform:u});c(n)&&(i.transitioning?r(f,ot,n,!0):n())},resetImage:function(){var n=this;n.image&&(fr(n.image),n.image=null)},start:function(n){var t=this,r=g(n),i=r.target;i.tagName.toLowerCase()==="img"&&(t.target=i,t.show())},click:function(n){var t=this,u=g(n),i=u.target,f=ct(i,"action"),r=t.imageData;switch(f){case"mix":t.isPlayed?t.stop():t.options.inline?t.isFulled?t.exit():t.full():t.hide();break;case"print":t.print();break;case"view":t.view(ct(i,"index"));break;case"zoom-in":t.zoom(.1,!0);break;case"zoom-out":t.zoom(-.1,!0);break;case"one-to-one":t.toggle();break;case"reset":t.reset();break;case"prev":t.prev();break;case"play":t.play();break;case"next":t.next();break;case"rotate-left":t.rotate(-90);break;case"rotate-right":t.rotate(90);break;case"flip-horizontal":t.scaleX(-r.scaleX||-1);break;case"flip-vertical":t.scaleY(-r.scaleY||-1);break;default:t.isPlayed&&t.stop()}},load:function(){var n=this,i=n.options,t=n.image,r=n.index,u=n.viewerData;n.timeout&&(clearTimeout(n.timeout),n.timeout=!1);f(t,et);t.style.cssText="width:0;height:0;margin-left:"+u.width/2+"px;margin-top:"+u.height/2+"px;max-width:none!important;visibility:visible;";n.initImage(function(){it(t,e,i.transition);it(t,vr,i.movable);n.renderImage(function(){n.isViewed=!0;p(n.element,at,{originalImage:n.images[r],index:r,image:t})})})},loadImage:function(n){var e=g(n),r=e.target,u=r.parentNode,t=u.offsetWidth||30,i=u.offsetHeight||50,f=!!ct(r,"filled");sr(r,function(n,u){var e=n/u,o=t,s=i;i*e>t?f?o=i*e:s=t/e:f?s=t/e:o=i*e;y(r,{width:o,height:s,marginLeft:(t-o)/2,marginTop:(i-s)/2})})},resize:function(){var n=this;n.initContainer();n.initViewer();n.renderViewer();n.renderList();n.isViewed&&n.initImage(function(){n.renderImage()});n.isPlayed&&s(ut(n.player,"img"),function(t){r(t,st,l(n.loadImage,n),!0);p(t,st)})},wheel:function(n){var i=this,t=g(n),u=Number(i.options.zoomRatio)||.1,r=1;i.isViewed&&((rt(t),i.wheeling)||(i.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?r=t.deltaY>0?1:-1:t.wheelDelta?r=-t.wheelDelta/120:t.detail&&(r=t.detail>0?1:-1),i.zoom(-r*u,!0,t)))},keydown:function(n){var t=this,i=g(n),r=t.options,u=i.keyCode||i.which||i.charCode;if(t.isFulled&&r.keyboard)switch(u){case 27:t.isPlayed?t.stop():r.inline?t.isFulled&&t.exit():t.hide();break;case 32:t.isPlayed&&t.stop();break;case 37:t.prev();break;case 38:rt(i);t.zoom(r.zoomRatio,!0);break;case 39:t.next();break;case 40:rt(i);t.zoom(-r.zoomRatio,!0);break;case 48:case 49:(i.ctrlKey||i.shiftKey)&&(rt(i),t.toggle())}},mousedown:function(n){var t=this,o=t.options,r=g(n),u=o.movable?"move":!1,f=r.touches,e,i;if(t.isViewed){if(f){if(e=f.length,e>1)if(o.zoomable&&e===2)i=f[1],t.startX2=i.pageX,t.startY2=i.pageY,u="zoom";else return;else t.isSwitchable()&&(u="switch");i=f[0]}u&&(rt(r),t.action=u,t.startX=i?i.pageX:r.pageX,t.startY=i?i.pageY:r.pageY)}},mousemove:function(n){var t=this,s=t.options,r=g(n),h=t.action,c=t.image,u=r.touches,o,i;if(t.isViewed){if(u){if(o=u.length,o>1)if(s.zoomable&&o===2)i=u[1],t.endX2=i.pageX,t.endY2=i.pageY;else return;i=u[0]}h&&(rt(r),h==="move"&&s.transition&&rr(c,e)&&f(c,e),t.endX=i?i.pageX:r.pageX,t.endY=i?i.pageY:r.pageY,t.change(r))}},mouseup:function(n){var t=this,u=g(n),r=t.action;r&&(rt(u),r==="move"&&t.options.transition&&i(t.image,e),t.action=!1)},show:function(){var n=this,u=n.options,o=n.element,t;return u.inline||n.transitioning?n:(n.isBuilt||n.build(),t=n.viewer,c(u.show)&&r(o,wi,u.show,!0),p(o,wi)===!1)?n:(i(n.body,pt),f(t,nt),r(o,ii,function(){n.view(n.target?ir(n.target,dt(n.images)):n.index);n.target=!1},!0),u.transition?(n.transitioning=!0,i(t,e),or(t),r(t,ot,l(n.shown,n),!0),i(t,b)):(i(t,b),n.shown()),n)},hide:function(){var n=this,t=n.options,u=n.element,i=n.viewer;return t.inline||n.transitioning||!n.isShown?n:(c(t.hide)&&r(u,bi,t.hide,!0),p(u,bi)===!1)?n:(n.isViewed&&t.transition?(n.transitioning=!0,r(n.image,ot,function(){r(i,ot,l(n.hidden,n),!0);f(i,b)},!0),n.zoomTo(0,!1,!1,!0)):(f(i,b),n.hidden()),n)},view:function(n){var t=this,c=t.element,a=t.title,v=t.canvas,e,o,s,y,h;return(n=Number(n)||0,!t.isShown||t.isPlayed||n<0||n>=t.length||t.isViewed&&n===t.index)?t:(o=t.items[n],s=ut(o,"img")[0],y=ct(s,"originalUrl"),h=s.getAttribute("alt"),e=u.createElement("img"),e.src=y,e.alt=h,p(c,ri,{originalImage:t.images[n],index:n,image:e})===!1)?t:(t.image=e,t.isViewed&&f(t.items[t.index],bt),i(o,bt),t.isViewed=!1,t.index=n,t.imageData=null,i(e,et),lt(v),gt(v,e),t.renderList(),lt(a),r(c,at,function(){var n=t.imageData,i=n.naturalWidth,r=n.naturalHeight;er(a,h+" ("+i+" × "+r+")")},!0),e.complete?t.load():(r(e,st,l(t.load,t),!0),t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(function(){f(e,et);t.timeout=!1},1e3)),t)},print:function(){var i=this,r="<html><head><\/head><body  style ='-webkit-print-color-adjust:exact;'><img src='"+i.image.currentSrc+"' onload='javascript:window.print();'/><\/body>",t=n.open("","","height="+n.innerHeight+",width="+n.innerWidth);return t.document.write(r),t.document.close(),t.focus(),t.close(),i},prev:function(){var n=this;return n.view(k(n.index-1,0)),n},next:function(){var n=this;return n.view(vt(n.index+1,n.length-1)),n},move:function(n,t){var i=this,r=i.imageData;return i.moveTo(d(n)?n:r.left+Number(n),d(t)?t:r.top+Number(t)),i},moveTo:function(n,t){var i=this,u=i.imageData,r=!1;return d(t)&&(t=n),n=Number(n),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.movable&&(h(n)&&(u.left=n,r=!0),h(t)&&(u.top=t,r=!0),r&&i.renderImage()),i},zoom:function(n,t,i){var r=this,u=r.imageData;return n=Number(n),n=n<0?1/(1-n):1+n,r.zoomTo(u.width*n/u.naturalWidth,t,i),r},zoomTo:function(n,t,i,r){var f=this,s=f.options,c=.01,l=100,u=f.imageData,e,o,a,v;return n=k(0,n),h(n)&&f.isViewed&&!f.isPlayed&&(r||s.zoomable)&&(r||(c=k(c,s.minZoomRatio),l=vt(l,s.maxZoomRatio),n=vt(k(n,c),l)),n>.95&&n<1.05&&(n=1),e=u.naturalWidth*n,o=u.naturalHeight*n,i?(a=eu(f.viewer),v=i.touches?ou(i.touches):{pageX:i.pageX,pageY:i.pageY},u.left-=(e-u.width)*((v.pageX-a.left-u.left)/u.width),u.top-=(o-u.height)*((v.pageY-a.top-u.top)/u.height)):(u.left-=(e-u.width)/2,u.top-=(o-u.height)/2),u.width=e,u.height=o,u.ratio=n,f.renderImage(),t&&f.tooltip()),f},rotate:function(n){var t=this;return t.rotateTo((t.imageData.rotate||0)+Number(n)),t},rotateTo:function(n){var t=this,i=t.imageData;return n=Number(n),h(n)&&t.isViewed&&!t.isPlayed&&t.options.rotatable&&(i.rotate=n,t.renderImage()),t},scale:function(n,t){var i=this,u=i.imageData,r=!1;return d(t)&&(t=n),n=Number(n),t=Number(t),i.isViewed&&!i.isPlayed&&i.options.scalable&&(h(n)&&(u.scaleX=n,r=!0),h(t)&&(u.scaleY=t,r=!0),r&&i.renderImage()),i},scaleX:function(n){var t=this;return t.scale(n,t.imageData.scaleY),t},scaleY:function(n){var t=this;return t.scale(t.imageData.scaleX,n),t},play:function(){var n=this,o=n.options,y=n.player,p=l(n.loadImage,n),c=[],a=0,t=0,v;return!n.isShown||n.isPlayed?n:(o.fullscreen&&n.requestFullscreen(),n.isPlayed=!0,i(y,ft),s(n.items,function(n,f){var h=ut(n,"img")[0],s=u.createElement("img");s.src=ct(h,"originalUrl");s.alt=h.getAttribute("alt");a++;i(s,wt);it(s,e,o.transition);rr(n,bt)&&(i(s,b),t=f);c.push(s);r(s,st,p,!0);gt(y,s)}),h(o.interval)&&o.interval>0&&(v=function(){n.playing=setTimeout(function(){f(c[t],b);t++;t=t<a?t:0;i(c[t],b);v()},o.interval)},a>1&&v()),n)},stop:function(){var n=this,t=n.player;return n.isPlayed?(n.options.fullscreen&&n.exitFullscreen(),n.isPlayed=!1,clearTimeout(n.playing),f(t,ft),lt(t),n):n},full:function(){var n=this,t=n.options,r=n.viewer,u=n.image,o=n.list;return!n.isShown||n.isPlayed||n.isFulled||!t.inline?n:(n.isFulled=!0,i(n.body,pt),i(n.button,si),t.transition&&(f(u,e),f(o,e)),i(r,ni),r.setAttribute("style",""),y(r,{zIndex:t.zIndex}),n.initContainer(),n.viewerData=tt({},n.containerData),n.renderList(),n.initImage(function(){n.renderImage(function(){t.transition&&setTimeout(function(){i(u,e);i(o,e)},0)})}),n)},exit:function(){var n=this,t=n.options,r=n.viewer,u=n.image,o=n.list;return n.isFulled?(n.isFulled=!1,f(n.body,pt),f(n.button,si),t.transition&&(f(u,e),f(o,e)),f(r,ni),y(r,{zIndex:t.zIndexInline}),n.viewerData=tt({},n.parentData),n.renderViewer(),n.renderList(),n.initImage(function(){n.renderImage(function(){t.transition&&setTimeout(function(){i(u,e);i(o,e)},0)})}),n):n},tooltip:function(){var n=this,u=n.options,t=n.tooltipBox,o=n.imageData;return!n.isViewed||n.isPlayed||!u.tooltip?n:(er(t,dr(o.ratio*100)+"%"),n.tooltiping?clearTimeout(n.tooltiping):u.transition?(n.fading&&p(t,ot),i(t,ft),i(t,wt),i(t,e),or(t),i(t,b)):i(t,ft),n.tooltiping=setTimeout(function(){u.transition?(r(t,ot,function(){f(t,ft);f(t,wt);f(t,e);n.fading=!1},!0),f(t,b),n.fading=!0):f(t,ft);n.tooltiping=!1},1e3),n)},toggle:function(){var n=this;return n.imageData.ratio===1?n.zoomTo(n.initialImageData.ratio,!0):n.zoomTo(1,!0),n},reset:function(){var n=this;return n.isViewed&&!n.isPlayed&&(n.imageData=tt({},n.initialImageData),n.renderImage()),n},update:function(){var n=this,t=[],r;return n.isImg&&!n.element.parentNode?n.destroy():(n.length=n.images.length,n.isBuilt&&(s(n.items,function(i,r){var f=ut(i,"img")[0],u=n.images[r];u?u.src!==f.src&&t.push(r):t.push(r)}),y(n.list,{width:"auto"}),n.initList(),n.isShown&&(n.length?n.isViewed&&(r=ir(n.index,t),r>=0?(n.isViewed=!1,n.view(k(n.index-(r+1),0))):i(n.items[n.index],bt)):(n.image=null,n.isViewed=!1,n.index=0,n.imageData=null,lt(n.canvas),lt(n.title)))),n)},destroy:function(){var n=this,t=n.element;return n.options.inline?n.unbind():(n.isShown&&n.unbind(),v(t,kt,n._start)),n.unbuild(),fu(t,o),n},shown:function(){var n=this,t=n.options,i=n.element;n.transitioning=!1;n.isFulled=!0;n.isShown=!0;n.isVisible=!0;n.render();n.bind();c(t.shown)&&r(i,ii,t.shown,!0);p(i,ii)},hidden:function(){var n=this,t=n.options,u=n.element;n.transitioning=!1;n.isViewed=!1;n.isFulled=!1;n.isShown=!1;n.isVisible=!1;n.unbind();f(n.body,pt);i(n.viewer,nt);n.resetList();n.resetImage();c(t.hidden)&&r(u,ki,t.hidden,!0);p(u,ki)},requestFullscreen:function(){var t=this,n=u.documentElement;!t.isFulled||u.fullscreenElement||u.mozFullScreenElement||u.webkitFullscreenElement||u.msFullscreenElement||(n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){var n=this;n.isFulled&&(u.exitFullscreen?u.exitFullscreen():u.msExitFullscreen?u.msExitFullscreen():u.mozCancelFullScreen?u.mozCancelFullScreen():u.webkitExitFullscreen&&u.webkitExitFullscreen())},change:function(n){var t=this,i=t.endX-t.startX,r=t.endY-t.startY;switch(t.action){case"move":t.move(i,r);break;case"zoom":t.zoom(function(n,t,i,r){var u=gi(n*n+t*t),f=gi(i*i+r*r);return(f-u)/u}(ht(t.startX-t.startX2),ht(t.startY-t.startY2),ht(t.endX-t.endX2),ht(t.endY-t.endY2)),!1,n);t.startX2=t.endX2;t.startY2=t.endY2;break;case"switch":t.action="switched";ht(i)>ht(r)&&(i>1?t.prev():i<-1&&t.next())}t.startX=t.endX;t.startY=t.endY},isSwitchable:function(){var t=this,n=t.imageData,i=t.viewerData;return n.left>=0&&n.top>=0&&n.width<=i.width&&n.height<=i.height}},a.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},a.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"><\/div><div class="viewer-footer"><div class="viewer-title"><\/div><ul class="viewer-toolbar"><li class="viewer-print" data-action="print"><i class="fa fa-print" data-action="print"><\/i><\/li><li class="viewer-zoom-in" data-action="zoom-in"><\/li><li class="viewer-one-to-one" data-action="one-to-one"><\/li><li class="viewer-zoom-out" data-action="zoom-out"><\/li><li class="viewer-reset" data-action="reset"><\/li><li class="viewer-prev" data-action="prev"><\/li><li class="viewer-play" data-action="play"><\/li><li class="viewer-next" data-action="next"><\/li><li class="viewer-rotate-left" data-action="rotate-left"><\/li><li class="viewer-rotate-right" data-action="rotate-right"><\/li><li class="viewer-flip-horizontal" data-action="flip-horizontal"><\/li><li class="viewer-flip-vertical" data-action="flip-vertical"><\/li><\/ul><div class="viewer-navbar"><ul class="viewer-list"><\/ul><\/div><\/div><div class="viewer-tooltip"><\/div><div class="viewer-button" data-action="mix"><\/div><div class="viewer-player"><\/div><\/div>',hr=n.Viewer,a.noConflict=function(){return n.Viewer=hr,a},a.setDefaults=function(n){tt(a.DEFAULTS,n)},typeof define=="function"&&define.amd&&define("viewer",[],function(){return a}),t||(n.Viewer=a),a});
/*
//# sourceMappingURL=viewer.min.js.map
*/